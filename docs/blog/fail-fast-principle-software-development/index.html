<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Introduction to the Fail fast! Principle in Software Development</title><link rel="stylesheet" type="text/css" href="docbook.css"><link rel="stylesheet" type="text/css" href="article.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><meta name="description" content="This article introduces the Fail Fast! principle. What is it? When should we use it? How does it help us to write better code?"><meta name="keywords" content="fail fast, fail safe, fault tolerant, error handling, software development quality"><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-162426780-1', 'ppl-lang.dev');
  ga('send', 'pageview');
</script></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="en" class="article"><div class="titlepage"><div><div><h2 class="title"><a name="fail_fast_principle"></a>Introduction to the <span class="emphasis"><em>Fail fast!</em></span> Principle in Software Development</h2></div><div><div class="author"><h3 class="author"><span class="firstname">Christian</span> <span class="surname">Neumanns</span></h3></div></div><div><p class="pubdate">2016-10-25</p></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>This article introduces the <span class="emphasis"><em>Fail Fast!</em></span> principle. What is it? When should we use it? How does it help us to write better code?</p></div></div></div><hr></div><p>Whenever an error occurs in a running software application there are typically three possible error-handling approaches:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>The <span class="bold"><strong><span class="emphasis"><em>Ignore!</em></span></strong></span> approach: the error is ignored and the application continues execution</p></li><li class="listitem"><p>The <span class="bold"><strong><span class="emphasis"><em>Fail fast!</em></span></strong></span> approach: the application stops immediately and reports an error</p></li><li class="listitem"><p>The <span class="bold"><strong><span class="emphasis"><em>Fail safe!</em></span></strong></span> approach: the application acknowledges the error and continues execution in the best possible way</p></li></ol></div><p>Which approach is the best one?</p><p>Which one should you apply in your application?</p><p>Before answering this vital question, let us first look at a simple example.</p><p>Suppose we have to write a (rudimentary) web application that displays a warning message near a water fountain to warn people that the water is polluted.</p><p>The following HTML code does the job:</p><pre class="programlisting">&lt;html&gt;
   &lt;body&gt;
      &lt;h2 style="color:red;"&gt;Important!&lt;/h2&gt;
      &lt;p&gt;Please &lt;b&gt;DO NOT&lt;/b&gt; drink this water!&lt;/p&gt;
   &lt;/body&gt;
&lt;/html&gt;</pre><p>The result displayed in the browser looks like this:</p><div class="informalfigure"><a name="fail_fast_ok"></a><div class="mediaobject"><img src="images/fail_fast_ok.PNG" alt="Fail fast principle: no problem"></div></div><p>Now let us insert a small bug. Instead of <code class="code">&lt;/b&gt;</code> we write <code class="code">&lt;b&gt;</code> after <code class="code">DO NOT</code>, as shown below:</p><pre class="programlisting">&lt;p&gt;Please &lt;b&gt;DO NOT&lt;b&gt; drink this water!&lt;/p&gt;</pre><p>Two interesting questions arise:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>What <span class="emphasis"><em>should</em></span> happen?</p></li><li class="listitem"><p>What <span class="emphasis"><em>will</em></span> happen?</p></li></ul></div><p>The second question is easy to answer. We just have to feed our browser with the buggy HTML code. This is the result - as displayed in Chrome, Edge, Firefox, Internet Explorer, and Safari at the time of writing:</p><div class="informalfigure"><a name="fail_fast_no_panic"></a><div class="mediaobject"><img src="images/fail_fast_no_panic.PNG" alt="Fail fast principle: no panic"></div></div><p>Before reading on, ask yourself: "Which approach has been applied by the browsers?" ...</p><p>Obviously, the <span class="emphasis"><em>Fail fast!</em></span> approach has not been applied because the application continued and did not report an error. The only difference to note is that more text is now displayed in bold. But the message as a whole is still displayed correctly and people are warned. Nothing to worry too much!</p><p>Let&#8217;s try another bug. Instead of <code class="code">&lt;b&gt;</code> we write <code class="code">&lt;b</code>  before <code class="code">DO NOT</code>, as shown below:</p><pre class="programlisting">&lt;p&gt;Please &lt;b DO NOT&lt;/b&gt; drink this water!&lt;/p&gt;</pre><p>This is the result - again as displayed in the browsers mentioned before:</p><div class="informalfigure"><a name="fail_fast_panic"></a><div class="mediaobject"><img src="images/fail_fast_panic.PNG" alt="Fail fast principle: panic"></div></div><p>Panic! Now the program does exactly the opposite of what it is supposed to do. The consequences are terrible. Our life-saving application has mutated into a killer-application (but not the kind of <a class="ulink" href="http://en.wikipedia.org/wiki/Killer_application" target="_top">killer-application</a> we all dream to write one day).</p><p>It is important to be aware of the fact that the above example is not just a theoretical, exaggerated example. There are a good number of real-life cases with &#8216;little bugs&#8217; having catastrophic consequences, such as the <a class="ulink" href="http://www.wired.com/thisdayintech/2009/07/dayintech_0722/" target="_top">Mariner 1</a> spacecraft that exploded shortly after lift-off due to a &#8216;missing hyphen&#8217;. For more examples, see: <a class="ulink" href="http://en.wikipedia.org/wiki/List_of_software_bugs" target="_top">List of software bugs</a>.</p><p>As we can see from the above example, the consequences of not applying the <span class="emphasis"><em>Fail fast!</em></span> approach vary largely and can range from completely harmless to extremely harmful.</p><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top">Unless we look at the browsers' source code, we don't know whether the <span class="emphasis"><em>Ignore!</em></span> or <span class="emphasis"><em>Fail safe!</em></span> approach is applied. My guess is that the tokens <code class="code">DO</code> and <code class="code">NOT</code> in the HTML code are interpreted as attributes of tag <code class="code">b</code>, but without values (such as DO="foo"), and without being part of standard HTML. Therefore they are ignored. The closing <code class="code">&lt;/b&gt;</code> is probably also simply ignored, because "drink this water" is displayed in bold.</td></tr></table></div><br><p>So, what <span class="emphasis"><em>is</em></span> the correct answer to the important question <span class="emphasis"><em>"What should happen?"</em></span></p><p>Well, it depends on the situation. There are, however, some general rules.</p><br><p>The first rule is:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="bold"><strong>We should never <span class="emphasis"><em>"Ignore!"</em></span> an error - unless there is a really good reason to do so.</strong></span></p></li></ul></div><p>This rule is well known and doesn't need any further explanation.</p><p>Remember rule 6 of <a class="ulink" href="http://www.lysator.liu.se/c/ten-commandments.html" target="_top">The 10 commandments for C programmers</a>, eloquently written in old English by Harry Spencer:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>"If a function be advertised to return an error code in the event of difficulties, thou shalt check for that code, yea, even though the checks triple the size of thy code and produce aches in thy typing fingers, for if thou thinkest 'it cannot happen to me', the gods shall surely punish thee for thy arrogance."</em></span></p></li></ul></div><br><p>The second rule is:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="bold"><strong>During development we should apply the <span class="emphasis"><em>Fail fast!</em></span> approach.</strong></span></p></li></ul></div><p>The rationale behind this rule is easy to understand:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The <span class="emphasis"><em>Fail fast!</em></span> approach helps in debugging.</p><p>As soon as something goes wrong, the application stops and the error message helps to detect, diagnose and correct the error. Therefore the <span class="emphasis"><em>Fail fast!</em></span> approach leads to more reliable software, reduces development and maintenance costs and prevents frustrations and catastrophes that would otherwise risk to appear in production mode.</p><p>Even if a bug doesn't lead to a severe failure, it is always best to detect it as soon as possible, because the costs to fix a bug raise exponentially with the time passed in the development cycle (compile-, test-, production-time).</p></li><li class="listitem"><p>The consequences of bugs appearing during <span class="emphasis"><em>development mode</em></span> are generally not harmful.</p><p>The customer doesn&#8217;t complain, money doesn&#8217;t go to the wrong account, and rockets don&#8217;t explode.</p></li></ul></div><p>Failing fast is commonly considered as a good practice in software development. Here are a few supporting quotes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>"Encourage good code habits ... This has many corollaries, including 'fail fast' ..."</em></span></p><p>The Google Guava team - <a class="link" href="https://github.com/google/guava/wiki/PhilosophyExplained" target="_blank">Philosophy Explained</a></p></li><li class="listitem"><p><span class="emphasis"><em>"... 'failing immediately and visibly' sounds like it would make your software more fragile, but it actually makes it more robust. Bugs are easier to find and fix, so fewer go into production."</em></span></p><p>Jim Shore / Martin Fowler - <a class="link" href="http://martinfowler.com/ieeeSoftware/failFast.pdf" target="_blank">Fail Fast</a></p></li><li class="listitem"><p><span class="emphasis"><em>"Some of the hardest bugs to track down have (in part) been caused by code that silently fails and continues instead of throwing an error. ... It is better to return an error as soon as a failure case is detected."</em></span></p><p>Henrik Warne - <a class="link" href="https://henrikwarne.com/2016/06/16/18-lessons-from-13-years-of-tricky-bugs/" target="_blank">18 Lessons From 13 Years of Tricky Bugs</a></p></li><li class="listitem"><p><span class="emphasis"><em>"We don&#8217;t wait long periods of time before learning that something isn&#8217;t working. We fail fast ..."</em></span></p><p>Joshua Kerievsky - <a class="link" href="https://www.infoq.com/articles/modern-agile-intro" target="_blank">An Introduction to Modern Agile</a></p></li></ul></div><br><p>However, the situation can change radically when the application runs under <span class="emphasis"><em>production mode</em></span>. Unfortunately, there is no <span class="emphasis"><em>one-size-fits-all</em></span> rule. Practice shows that it is generally better to also apply the <span class="emphasis"><em>Fail fast!</em></span> approach by default. The final damage resulting from an application that ignores an error and just continues arbitrarily is generally worse than the damage provoked by an application that stops suddenly. For example, if an accounting application stops working suddenly, the user is <span class="emphasis"><em>angry</em></span>. But if it silently ignores an error and continues and produces wrong results (such as an unbalanced balance sheet), the user is <span class="emphasis"><em>very angry</em></span>. <span class="emphasis"><em>&#8216;Angry&#8217;</em></span> is better than <span class="emphasis"><em>&#8216;very angry&#8217;</em></span>. Therefore, in this case the <span class="emphasis"><em>Fail fast!</em></span> approach is better.</p><p>In our previous HTML example, the <span class="emphasis"><em>Fail fast!</em></span> approach would also be much better. Suppose that, instead of continuing execution, the browsers displayed an error message. Then the developer(s) would immediately get aware of the problem and the code could be fixed quickly and easily, without causing any harm. But even if the buggy code went into production (for strange reasons), then the worst case scenario would be less terrible. Displaying "Please drink this water" can be dreadful. On the other hand, not displaying any message, or just displaying an (incomprehensible) error message, would probably just result in a very low percentage of people daring to taste a small quantity of water.</p><p>In practice, each case must sometimes be studied individually and carefully. This is especially true if the <span class="emphasis"><em>greatest possible damage</em></span> is high, such as in medical applications, money transfer applications or space invader applications. For example, applying the <span class="emphasis"><em>Fail fast!</em></span> rule is obviously the right approach as long as a rocket to Mars didn&#8217;t take off. But as soon as the rocket has started, stopping the application (or, even worse, ignoring an error) is no longer an option. Now the <span class="emphasis"><em>Fail safe!</em></span> approach must be applied in order to <span class="emphasis"><em>do the best we can do</em></span>.</p><p>A good option is sometimes to fail fast, but minimize the damage. For example, if a run-time-error occurs in a text editor application, the application should first automatically save the current text in a temporary file, then display a meaningful message to the user ("Sorry, ... but your current text is saved in a temporary file abc.tmp"), optionally send an error report to the developers, and then stop.</p><br><p>Hence, the third rule:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="bold"><strong>In critical applications the <span class="emphasis"><em>Fail safe!</em></span> approach must be implemented in order to minimize damages.</strong></span></p></li></ul></div><br><p>To summarize:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>In <span class="emphasis"><em>development mode</em></span> we should always apply the <span class="emphasis"><em>Fail fast!</em></span> approach.</p></li><li class="listitem"><p>In <span class="emphasis"><em>production mode</em></span>:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>We should generally favor the <span class="emphasis"><em>Fail fast!</em></span> approach by default.</p></li><li class="listitem"><p>Critical applications that risk leading to high damages in case of a malfunction need customized, context-specific and damage-eliminating (or at least damage-reducing) behavior. <span class="emphasis"><em>Fail safe and react appropriately!</em></span> approaches must be applied in fault-tolerant systems.</p></li></ul></div></li></ul></div><p>The same idea is expressed by the excellent <a class="ulink" href="http://www.faqs.org/docs/artu/ch01s06.html#id2878538" target="_top">Rule of Repair</a> in <a class="ulink" href="http://www.faqs.org/docs/artu/index.html" target="_top">The Art of Unix Programming</a>, written by Eric Steven Raymond:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>"Repair what you can - but when you must fail, fail noisily and as soon as possible."</em></span></p></li></ul></div><br><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top">Further information and examples are available in Wikipedia under <a class="ulink" href="https://en.wikipedia.org/wiki/Fail-fast" target="_top">Fail fast</a>, <a class="ulink" href="https://en.wikipedia.org/wiki/Fail-safe" target="_top">Fail safe</a>, and <a class="ulink" href="https://en.wikipedia.org/wiki/Fault-tolerant_computer_system" target="_top">Fault tolerant computer system</a>.</td></tr></table></div><br><p>In any case, it is always helpful to use a development environment that supports the <span class="emphasis"><em>Fail fast!</em></span> principle. For example, a compiled language supports the <span class="emphasis"><em>Fail fast!</em></span> rule because compilers can immediately report a whole plethora of bugs. Here is an example of a stupid bug that easily escapes the human eye and can lead to 'unwanted surprises', such as a hanging system due to an infinite loop:</p><pre class="programlisting">var row_index = 1
...
row_indx = row_index + 1</pre><p>Typos like this (i.e. writing <code class="code">row_indx</code> instead of <code class="code">row_index</code>) are common and are immediately caught by any decent compiler or (even better) by an intelligent IDE.</p><br><p>Luckily there are a good number of very effective <span class="emphasis"><em>Fail fast!</em></span> features that can be natively built into a programming language. They all rely on the following rule:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="bold"><strong>Errors should preferably be automatically detected at compile-time, or else as early as possible at run-time.</strong></span></p></li></ul></div><p>Examples of powerful <span class="emphasis"><em>Fail fast!</em></span> language features are: static and semantic typing, compile-time null-safety (no null pointer errors at run-time!), design by contract, generic type parameters, integrated unit testing, etc.</p><p>Even better than detecting errors early is to not allow them by design. This can be achieved if the programming language doesn't support error-prone programming techniques such as global mutable data, implicit type conversions, silently ignored arithmetic overflow errors, thruthiness (e.g. <code class="code">""</code>, <code class="code">0</code> and <code class="code">null</code> are equal to <code class="code">false</code>) etc.</p><br><p>Therefore, we should always prefer a programming environment ( = programming language + libraries + frameworks + tools) that supports the <span class="emphasis"><em>Fail fast!</em></span> principle. We will debug less and we will produce more reliable and safe code in less time.</p></div></body></html>
